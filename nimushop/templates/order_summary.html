{% extends "base.html" %}

{% block content %}
  <main>
    <div class="container">

    <div class="table-responsive text-nowrap">
    <h2 class="ordertopfix">Order Summary</h2>
    <table class="table orderfix">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Item title</th>
            <th scope="col">Price</th>
            <th scope="col">Quantity</th>
            <th scope="col">Image</th>

            <th scope="col">Total Item Price</th>
        </tr>
        </thead>
        <tbody>
        {% for order_item in object.items.all %}
        
        <tr>
           
            <th scope="row">
                <div class="card" style="width: 3rem;height: 2rem;">
                    
                    <img
                    
                      src="{{  order_item.item.image.url }}"
                      class="card-img-top"
                      alt="..."
                      
                    />
                    
                  </div>
            </th>
           
            <td>{{ order_item.item.title }}</td>
            <td>{{ order_item.item.price }}</td>
            
           
           

            <td>
              
               
                <a href="{% url 'core:remove-single-item-from-cart' order_item.item.slug %}"><i class="fas fa-minus mr-2"></i></a>
                {{ order_item.quantity }}
                <a href="{% url 'core:add-to-cart' order_item.item.slug %}"><i class="fas fa-plus ml-2"></i></a>
               

            </td>
            <td>
            {% if order_item.item.discount_price %}
                R{{ order_item.get_total_discount_item_price }}
                <span class="badge badge-primary">Saving ৳{{ order_item.get_amount_saved }}</span>
            {% else %}
                R{{ order_item.get_total_item_price }}
            {% endif %}
            <a style='color: red;' href="{% url 'core:remove-from-cart' order_item.item.slug %}">
                <i class="fas fa-trash float-right"></i>
            </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan='5'>Your cart is empty</td>
        </tr>
        <tr>
            <td colspan="5">
            <a class='btn btn-primary float-right' href='/'>Continue shopping</a>
            </td>
        </tr>
        {% endfor %}
        {% if object.coupon %}
        <tr>
            <td colspan="4"><b>Coupon</b></td>
            <td><b>-৳{{ object.coupon.amount }}</b></td>
        </tr>
        {% endif %}
        {% if object.get_total %}
        <tr>
            <td colspan="4"><b>Order Total</b></td>
            <td><b>R{{ object.get_total }}</b></td>
        </tr>
        <tr>
            <td colspan="5">
            <a class='btn btn-warning float-right ml-2' href='/checkout/'>Proceed to checkout</a>
            <a class='btn btn-primary float-right' href='/'>Continue shopping</a>
            </td>
        </tr>
        {% endif %}
        </tbody>
    </table>

    </div>

    </div>


    <!-- <div class="row">
		<div class="col-lg-12">
			<div class="box-element">

				<a  class="btn btn-outline-dark" href="/">&#x2190; Continue Shopping</a>

				<br>
				<br>
				<table class="table">
					<tr>
						<th><h5>Items: <strong>{{order.get_cart_items}}</strong></h5></th>
						<th><h5>Total:<strong> ${{order.get_cart_total|floatformat:2}}</strong></h5></th>
						<th>
							<a  style="float:right; margin:5px;" class="btn btn-success" href='/checkout/'>Checkout</a>
						</th>
					</tr>
				</table>

			</div>

			<br>
			<div class="box-element">
				<div class="cart-row">
					<div style="flex:2"></div>
					<div style="flex:2"><strong>Item</strong></div>
					<div style="flex:1"><strong>Price</strong></div>
					<div style="flex:1"><strong>Quantity</strong></div>
					<div style="flex:1"><strong>Total</strong></div>
				</div>
				{% for order_item in object.items.all %}
				<div class="cart-row">
					<div style="flex:2"><img class="row-image" src="{{order_item.image}}"></div>
					<div style="flex:2"><p>{{order_item.item.name}}</p></div>
					<div style="flex:1"><p>${{order_item.item.price|floatformat:2}}</p></div>
					<div style="flex:1">
						<p class="quantity">{{order_item.quantity}}</p>
						<div class="quantity">
							<img data-product="{{order_item.product.id}}" data-action="add" class="chg-quantity update-cart" >
					
							<img data-product="{{order_item.product.id}}" data-action="remove" class="chg-quantity update-cart">
						</div>
					</div>
					<div style="flex:1"><p>${{order_item.get_total|floatformat:2}}</p></div>
				</div>
				{% endfor %}
			</div>
		</div>
	</div> -->

  </main>

{% endblock content %}


